#!/usr/bin/env bash

items=`find ~/projects -maxdepth 2 -mindepth 2 -type d`

if [[ $# -eq 1 ]]; then
    selected=$1
else
    selected=`echo "$items" | fzf`
fi

if [ -z ${selected} ]; then
    echo "Please select an option"
else
    tmux_session_name=`basename $selected | tr . _`

    if ! tmux has-session -t $tmux_session_name; then
        tmux new-session -ds $tmux_session_name -c $selected
    fi

    if [[ -z $TMUX ]]; then
        tmux attach-session -t $tmux_session_name
    else
        tmux switch-client -t $tmux_session_name
    fi
fi

